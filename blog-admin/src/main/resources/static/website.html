<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>网站信息</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/toastr.min.css" rel="stylesheet">
<link href="css/font-awesome.min.css" rel="stylesheet">
<link href="css/animate.css" rel="stylesheet">
<link href="css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
</head>
<body>
	
	<form id="update-form" onsubmit="return modalSubmit.update(this)" style="padding: 20px;">
		<table class="table table-bordered">
			<tr>
				<td style="width: 150px;">网站名称：</td>
				<td>
					<input type="text" name="website_name" class="form-control" required="" pattern=".{1,20}" title="20个字符以内" />
				</td>
			</tr>
			<tr>
				<td>个人描述：</td>
				<td>
					<textarea name="description" class="form-control" required="" pattern=".{1,255}" title="255个字符以内"></textarea>
				</td>
			</tr>
			<tr>
				<td>个人头像：</td>
				<td>
					<a onclick="modalSubmit.upload_headImg(this)">
						<img name="head_img_url" style="max-height: 100px;" src="img/upload-thumb.png" title="点我上传" />
						<input type="text" class="hidden" name="head_img_path" />
					</a>
				</td>
			</tr>
			<tr>
				<td>分享二维码：</td>
				<td>
					<a onclick="modalSubmit.upload_shareCodeImg(this)">
						<img name="share_code_img_url" style="max-height: 100px;" src="img/upload-thumb.png" title="点我上传" />
						<input type="text" class="hidden" name="share_code_img_path" />
					</a>
				</td>
			</tr>
			<tr>
				<td>关于我：</td>
				<td>
					<script id="editor_update" type="text/javascript" name="aboutme" style="width: 100%;height: 300px;"></script>
				</td>
			</tr>
		</table>
		<div style="text-align: right;">
			<input type="submit" class="btn btn-primary" value="修改" />
		</div>
	</form>
	
	
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/plugins/layer/layer.min.js"></script>
	<script src="js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
	<script src="js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
	<!--右上角提示框插件-->
	<script src="js/toastr.min.js"></script>
	<!--ueditor编辑器-->
	<script src="js/plugins/ueditor/ueditor.config.js"></script>
	<script src="js/plugins/ueditor/ueditor.all.min.js"></script>
	<script src="js/common.js"></script>
	<script type="text/javascript">
		window.UEDITOR_CONFIG.serverUrl = '/ueditor/index?type=website';//type决定上传到哪个目录
		var editor_update = UE.getEditor('editor_update');
		
		ajax('get', '/website/getDetail', null, function(res) {
			formload(document.querySelector('#update-form'), res);
		});
		
		var modalSubmit = {
			upload_headImg: function(btn) {
				input_upload('img', false, function(file) {
					ajax('file', '/website/upload_headImg', {
						upload_headImg: file,
					}, function(res) {
						formload(btn, res);
					});
				});
			},
			upload_shareCodeImg: function(btn) {
				input_upload('img', false, function(file) {
					ajax('file', '/website/upload_shareCodeImg', {
						upload_shareCodeImg: file,
					}, function(res) {
						formload(btn, res);
					});
				});
			},
			update: function(form) {
				ajax('post', '/website/update', getFormObj(form), function(res) {
					
				});
				return false;
			}
		}
	</script>
</body>
</html>
